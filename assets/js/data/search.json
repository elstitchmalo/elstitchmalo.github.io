---
layout: compress
swcache: true
---

[
{% assign items = site.posts | concat: site.academia %}
{% for item in items %}
  {
    "title": {{ item.title | default: item.slug | strip_html | strip_newlines | escape_once | jsonify }},
    "url": {{ item.url | relative_url | jsonify }},
    "categories": {{ item.categories | join: ', ' | strip_html | strip_newlines | escape_once | jsonify }},
    "tags": {{ item.tags | join: ', ' | strip_html | strip_newlines | escape_once | jsonify }},
    "date": {{ item.date | jsonify }},
    "collection": {{ item.collection | jsonify }},
    "path": {{ item.path | jsonify }},

    {% capture safe_content -%}
{% if item.collection == "posts" %}
{{ item.content | strip_html | strip_newlines | escape_once }}
{% else %}
{{ item.description | default: "" | strip_html | strip_newlines | escape_once }}
{% endif %}
{%- endcapture %}

    "content": {{ safe_content | strip | jsonify }}
  }{% unless forloop.last %},{% endunless %}
{% endfor %}
]
